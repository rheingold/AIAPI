<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI API Server Dashboard</title>
  <link rel="stylesheet" href="dashboard.css">
</head>
<body>
  <div class="container">
    <header>
      <h1>ğŸ¤– AI API Server Control Panel</h1>
      <div class="status-bar">
        <div class="status-item">
          <span class="label">Status:</span>
          <span id="server-status" class="value status-running">Running</span>
        </div>
        <div class="status-item">
          <span class="label">Uptime:</span>
          <span id="uptime" class="value">--</span>
        </div>
        <div class="status-item">
          <span class="label">Requests:</span>
          <span id="request-count" class="value">0</span>
        </div>
      </div>
    </header>

    <div class="content">
      <aside class="sidebar">
        <nav>
          <button class="nav-btn active" data-section="logs">
            ğŸ“‹ Live Logs
          </button>
          <button class="nav-btn" data-section="settings">
            âš™ï¸ Settings
          </button>
          <button class="nav-btn" data-section="tools">
            ğŸ”§ MCP Tools
          </button>
          <button class="nav-btn" data-section="scenarios">
            ğŸ¬ Scenarios
          </button>
        </nav>

        <div class="actions">
          <h3>Quick Actions</h3>
          <button id="btn-restart" class="action-btn">ğŸ”„ Restart Server</button>
          <button id="btn-clear-logs" class="action-btn">ğŸ—‘ï¸ Clear Logs</button>
          <button id="btn-export-logs" class="action-btn">ğŸ’¾ Export Logs</button>
        </div>
      </aside>

      <main class="main-content">
        <!-- Logs Section -->
        <section id="section-logs" class="section active">
          <div class="section-header">
            <h2>Live Server Logs</h2>
            <div class="log-controls">
              <label>
                <input type="checkbox" id="auto-scroll" checked> Auto-scroll
              </label>
              <label style="color: #007acc; font-weight: bold;">
                <input type="checkbox" id="json-logging" checked> JSON Logging
              </label>
              <label style="color: #ff6b35; font-weight: bold;">
                <input type="checkbox" id="raw-mode"> Raw Mode
              </label>
              <select id="log-level">
                <option value="all">All Levels</option>
                <option value="debug">Debug</option>
                <option value="info">Info</option>
                <option value="warn">Warning</option>
                <option value="error">Error</option>
              </select>
              <input type="text" id="log-search" placeholder="Search logs...">
            </div>
          </div>
          <div class="log-container" id="log-output">
            <div class="log-entry info">
              <span class="timestamp">21:45:00</span>
              <span class="level">INFO</span>
              <span class="source">system</span>
              <span class="message">Dashboard connected, waiting for logs...</span>
            </div>
          </div>
        </section>

        <!-- Settings Section -->
        <section id="section-settings" class="section">
          <div class="section-header">
            <h2>Server Settings</h2>
            <button id="btn-save-settings" class="btn-primary">ğŸ’¾ Save Changes</button>
            <button id="btn-reload-settings" class="btn-secondary">ğŸ”„ Reload</button>
          </div>
          <div class="settings-container">
            <!-- File Paths -->
            <div class="setting-group">
              <h3>ğŸ“ File Paths</h3>
              <label>
                Scenarios Folder:
                <div class="path-input">
                  <input type="text" id="setting-scenarios-path" value="./scenarios" placeholder="./scenarios">
                  <button class="btn-browse" data-target="setting-scenarios-path">ğŸ“‚ Browse</button>
                </div>
              </label>
              <label>
                Security Folder:
                <div class="path-input">
                  <input type="text" id="setting-security-path" value="./security" placeholder="./security">
                  <button class="btn-browse" data-target="setting-security-path">ğŸ“‚ Browse</button>
                </div>
              </label>
              <label>
                Public Key File:
                <div class="path-input">
                  <input type="text" id="setting-public-key" value="./security/public.key.enc" placeholder="./security/public.key.enc">
                  <button class="btn-browse" data-target="setting-public-key">ğŸ“‚ Browse</button>
                </div>
              </label>
              <label>
                Private Key File:
                <div class="path-input">
                  <input type="text" id="setting-private-key" value="./security/private.key.enc" placeholder="./security/private.key.enc">
                  <button class="btn-browse" data-target="setting-private-key">ğŸ“‚ Browse</button>
                </div>
              </label>
            </div>

            <!-- Security Policy -->
            <div class="setting-group">
              <h3>ğŸ” Security Policy</h3>
              <label>
                <input type="checkbox" id="setting-require-signature"> Require Binary Signatures
              </label>
              <label>
                <input type="checkbox" id="setting-require-os-enforcement"> Require OS Enforcement
              </label>
              <label>
                <input type="checkbox" id="setting-allow-unsigned-scenarios"> Allow Unsigned Scenarios
              </label>
              <label>
                <input type="checkbox" id="setting-enable-session-auth" checked> Enable Session Authentication
              </label>
            </div>

            <!-- Security Filters -->
            <div class="setting-group">
              <h3>ğŸ›¡ï¸ Security Filters</h3>
              <div class="filter-section">
                <h4>Allowed Executables</h4>
                <textarea id="setting-allowed-exes" rows="4" placeholder="calc.exe&#10;notepad.exe&#10;explorer.exe"></textarea>
                <small>One executable per line</small>
              </div>
              <div class="filter-section">
                <h4>Blocked Executables</h4>
                <textarea id="setting-blocked-exes" rows="4" placeholder="malware.exe&#10;dangerous.exe"></textarea>
                <small>One executable per line</small>
              </div>
              <div class="filter-section">
                <h4>Allowed File Paths</h4>
                <textarea id="setting-allowed-paths" rows="4" placeholder="C:\Program Files\*&#10;C:\Windows\System32\*"></textarea>
                <small>One path per line. Use * for wildcards</small>
              </div>
              <div class="filter-section">
                <h4>Blocked File Paths</h4>
                <textarea id="setting-blocked-paths" rows="4" placeholder="C:\Users\*\AppData\Local\Temp\*"></textarea>
                <small>One path per line. Use * for wildcards</small>
              </div>
            </div>

            <!-- Session Tokens -->
            <div class="setting-group">
              <h3>ğŸ”‘ Session Tokens</h3>
              <label>
                Token Expiry (seconds):
                <input type="number" id="setting-token-expiry" value="60" min="5" max="3600">
              </label>
              <button id="btn-generate-token" class="btn-secondary">ğŸ”„ Generate New Token</button>
              <div id="token-info" class="token-info">
                <span>Current Token: <code id="current-token">Loading...</code></span>
              </div>
            </div>

            <!-- Server Configuration -->
            <div class="setting-group">
              <h3>âš™ï¸ Server Configuration</h3>
              <label>
                MCP Server Port:
                <input type="number" id="setting-port" value="3457" min="1024" max="65535">
              </label>
              <label>
                Dashboard Port:
                <input type="number" id="setting-dashboard-port" value="3458" min="1024" max="65535">
              </label>
              <label>
                Log Level:
                <select id="setting-log-level">
                  <option value="debug">Debug</option>
                  <option value="info" selected>Info</option>
                  <option value="warn">Warning</option>
                  <option value="error">Error</option>
                </select>
              </label>
            </div>

            <!-- Validation Status -->
            <div class="setting-group">
              <h3>âœ… Configuration Status</h3>
              <div id="config-status" class="config-status">
                <div class="status-item">
                  <span class="status-icon">â³</span>
                  <span>Checking configuration...</span>
                </div>
              </div>
              <button id="btn-validate-config" class="btn-secondary">ğŸ” Validate Configuration</button>
            </div>
          </div>
        </section>

        <!-- Tools Section -->
        <section id="section-tools" class="section">
          <div class="section-header">
            <h2>Available MCP Tools</h2>
          </div>
          <div id="tools-list" class="tools-grid">
            <div class="loading">Loading tools...</div>
          </div>
        </section>

        <!-- Scenarios Section -->
        <section id="section-scenarios" class="section">
          <div class="section-header">
            <h2>Test Scenarios</h2>
            <button id="btn-run-scenario" class="btn-primary">â–¶ï¸ Run Selected</button>
          </div>
          <div id="scenarios-list" class="scenarios-list">
            <div class="loading">Loading scenarios...</div>
          </div>
        </section>
      </main>
    </div>
  </div>

  <script src="dashboard.js"></script>
</body>
</html>
